{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.roles": {
      "name": "roles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "unique_name": {
          "name": "unique_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "can_manage_forms": {
          "name": "can_manage_forms",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "can_manage_testimonials": {
          "name": "can_manage_testimonials",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "can_manage_widgets": {
          "name": "can_manage_widgets",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "can_manage_members": {
          "name": "can_manage_members",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "can_manage_billing": {
          "name": "can_manage_billing",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "can_delete_org": {
          "name": "can_delete_org",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_viewer": {
          "name": "is_viewer",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_system_role": {
          "name": "is_system_role",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "roles_unique_name_unique": {
          "columns": [
            "unique_name"
          ],
          "nullsNotDistinct": false,
          "name": "roles_unique_name_unique"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.plans": {
      "name": "plans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "unique_name": {
          "name": "unique_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_testimonials": {
          "name": "max_testimonials",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_forms": {
          "name": "max_forms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_widgets": {
          "name": "max_widgets",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_members": {
          "name": "max_members",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "show_branding": {
          "name": "show_branding",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_plans_active": {
          "name": "idx_plans_active",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_plans_unique_name": {
          "name": "idx_plans_unique_name",
          "columns": [
            {
              "expression": "unique_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "plans_unique_name_unique": {
          "columns": [
            "unique_name"
          ],
          "nullsNotDistinct": false,
          "name": "plans_unique_name_unique"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.plan_prices": {
      "name": "plan_prices",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "plan_id": {
          "name": "plan_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "currency_code": {
          "name": "currency_code",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "price_monthly_in_base_unit": {
          "name": "price_monthly_in_base_unit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "price_yearly_in_base_unit": {
          "name": "price_yearly_in_base_unit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "price_lifetime_in_base_unit": {
          "name": "price_lifetime_in_base_unit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_plan_prices_currency": {
          "name": "idx_plan_prices_currency",
          "columns": [
            {
              "expression": "currency_code",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_plan_prices_plan": {
          "name": "idx_plan_prices_plan",
          "columns": [
            {
              "expression": "plan_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plan_prices_plan_fk": {
          "name": "plan_prices_plan_fk",
          "tableFrom": "plan_prices",
          "tableTo": "plans",
          "schemaTo": "public",
          "columnsFrom": [
            "plan_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "plan_prices_unique": {
          "columns": [
            "plan_id",
            "currency_code"
          ],
          "nullsNotDistinct": false,
          "name": "plan_prices_unique"
        }
      },
      "checkConstraints": {
        "plan_prices_currency_check": {
          "name": "plan_prices_currency_check",
          "value": "(currency_code)::text ~ '^[A-Z]{3}$'::text"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.organizations": {
      "name": "organizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "settings": {
          "name": "settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "setup_status": {
          "name": "setup_status",
          "type": "organization_setup_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'completed'"
        },
        "logo_id": {
          "name": "logo_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_organizations_active": {
          "name": "idx_organizations_active",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_organizations_created_by": {
          "name": "idx_organizations_created_by",
          "columns": [
            {
              "expression": "created_by",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_organizations_logo_id": {
          "name": "idx_organizations_logo_id",
          "columns": [
            {
              "expression": "logo_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_organizations_slug": {
          "name": "idx_organizations_slug",
          "columns": [
            {
              "expression": "slug",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_organizations_logo_id": {
          "name": "fk_organizations_logo_id",
          "tableFrom": "organizations",
          "tableTo": "media",
          "schemaTo": "public",
          "columnsFrom": [
            "logo_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "organizations_created_by_fk": {
          "name": "organizations_created_by_fk",
          "tableFrom": "organizations",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "organizations_slug_unique": {
          "columns": [
            "slug"
          ],
          "nullsNotDistinct": false,
          "name": "organizations_slug_unique"
        }
      },
      "checkConstraints": {
        "organizations_slug_format": {
          "name": "organizations_slug_format",
          "value": "(slug)::text ~ '^[a-z0-9]([a-z0-9-]*[a-z0-9])?$'::text"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email_verified": {
          "name": "email_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "locale": {
          "name": "locale",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'en'"
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'UTC'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_users_active": {
          "name": "idx_users_active",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_users_email": {
          "name": "idx_users_email",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "columns": [
            "email"
          ],
          "nullsNotDistinct": false,
          "name": "users_email_unique"
        }
      },
      "checkConstraints": {
        "users_locale_check": {
          "name": "users_locale_check",
          "value": "locale ~ '^[a-z]{2}(-[A-Z]{2})?$'::text"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_identities": {
      "name": "user_identities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_16()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider_user_id": {
          "name": "provider_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider_email": {
          "name": "provider_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider_metadata": {
          "name": "provider_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_identities_lookup": {
          "name": "idx_user_identities_lookup",
          "columns": [
            {
              "expression": "provider",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "provider_user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_identities_one_primary": {
          "name": "idx_user_identities_one_primary",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(is_primary = true)",
          "with": {}
        },
        "idx_user_identities_user": {
          "name": "idx_user_identities_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_identities_user_fk": {
          "name": "user_identities_user_fk",
          "tableFrom": "user_identities",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_identities_provider_unique": {
          "columns": [
            "provider",
            "provider_user_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_identities_provider_unique"
        }
      },
      "checkConstraints": {
        "user_identities_provider_check": {
          "name": "user_identities_provider_check",
          "value": "provider = ANY (ARRAY['supabase'::text, 'google'::text, 'github'::text, 'microsoft'::text, 'email'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.organization_plans": {
      "name": "organization_plans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "plan_id": {
          "name": "plan_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "billing_cycle": {
          "name": "billing_cycle",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "currency_code": {
          "name": "currency_code",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "starts_at": {
          "name": "starts_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "current_period_ends_at": {
          "name": "current_period_ends_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "trial_ends_at": {
          "name": "trial_ends_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_at": {
          "name": "cancelled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "max_forms": {
          "name": "max_forms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_testimonials": {
          "name": "max_testimonials",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_widgets": {
          "name": "max_widgets",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "max_members": {
          "name": "max_members",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "show_branding": {
          "name": "show_branding",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "price_in_base_unit": {
          "name": "price_in_base_unit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "has_overrides": {
          "name": "has_overrides",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "override_reason": {
          "name": "override_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "overridden_by": {
          "name": "overridden_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "overridden_at": {
          "name": "overridden_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_org_plans_active": {
          "name": "idx_org_plans_active",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(status = ANY (ARRAY['trial'::text, 'active'::text]))",
          "with": {}
        },
        "idx_org_plans_expiring": {
          "name": "idx_org_plans_expiring",
          "columns": [
            {
              "expression": "current_period_ends_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((status = 'active'::text) AND (current_period_ends_at IS NOT NULL))",
          "with": {}
        },
        "idx_org_plans_org": {
          "name": "idx_org_plans_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_org_plans_plan": {
          "name": "idx_org_plans_plan",
          "columns": [
            {
              "expression": "plan_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_org_plans_status": {
          "name": "idx_org_plans_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "org_plans_org_fk": {
          "name": "org_plans_org_fk",
          "tableFrom": "organization_plans",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "org_plans_overridden_by_fk": {
          "name": "org_plans_overridden_by_fk",
          "tableFrom": "organization_plans",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "overridden_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "org_plans_plan_fk": {
          "name": "org_plans_plan_fk",
          "tableFrom": "organization_plans",
          "tableTo": "plans",
          "schemaTo": "public",
          "columnsFrom": [
            "plan_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "org_plans_billing_check": {
          "name": "org_plans_billing_check",
          "value": "billing_cycle = ANY (ARRAY['monthly'::text, 'yearly'::text, 'lifetime'::text])"
        },
        "org_plans_currency_check": {
          "name": "org_plans_currency_check",
          "value": "(currency_code)::text ~ '^[A-Z]{3}$'::text"
        },
        "org_plans_status_check": {
          "name": "org_plans_status_check",
          "value": "status = ANY (ARRAY['trial'::text, 'active'::text, 'cancelled'::text, 'expired'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.organization_roles": {
      "name": "organization_roles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role_id": {
          "name": "role_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_default_org": {
          "name": "is_default_org",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "invited_by": {
          "name": "invited_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invited_at": {
          "name": "invited_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "joined_at": {
          "name": "joined_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_org_roles_active": {
          "name": "idx_org_roles_active",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_org_roles_one_default": {
          "name": "idx_org_roles_one_default",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(is_default_org = true)",
          "with": {}
        },
        "idx_org_roles_org": {
          "name": "idx_org_roles_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_org_roles_role": {
          "name": "idx_org_roles_role",
          "columns": [
            {
              "expression": "role_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_org_roles_user": {
          "name": "idx_org_roles_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "org_roles_invited_by_fk": {
          "name": "org_roles_invited_by_fk",
          "tableFrom": "organization_roles",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "invited_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "org_roles_org_fk": {
          "name": "org_roles_org_fk",
          "tableFrom": "organization_roles",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "org_roles_role_fk": {
          "name": "org_roles_role_fk",
          "tableFrom": "organization_roles",
          "tableTo": "roles",
          "schemaTo": "public",
          "columnsFrom": [
            "role_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "org_roles_user_fk": {
          "name": "org_roles_user_fk",
          "tableFrom": "organization_roles",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "org_roles_unique": {
          "columns": [
            "user_id",
            "organization_id"
          ],
          "nullsNotDistinct": false,
          "name": "org_roles_unique"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.forms": {
      "name": "forms",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_name": {
          "name": "product_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_description": {
          "name": "product_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "settings": {
          "name": "settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "branching_config": {
          "name": "branching_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"enabled\":false,\"threshold\":4,\"ratingStepId\":null}'::jsonb"
        }
      },
      "indexes": {
        "idx_forms_active": {
          "name": "idx_forms_active",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_forms_org": {
          "name": "idx_forms_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_forms_organization_status": {
          "name": "idx_forms_organization_status",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "forms_created_by_fk": {
          "name": "forms_created_by_fk",
          "tableFrom": "forms",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "forms_org_fk": {
          "name": "forms_org_fk",
          "tableFrom": "forms",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "forms_updated_by_fk": {
          "name": "forms_updated_by_fk",
          "tableFrom": "forms",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_forms_status": {
          "name": "chk_forms_status",
          "value": "status = ANY (ARRAY['draft'::text, 'published'::text, 'archived'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.question_types": {
      "name": "question_types",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "unique_name": {
          "name": "unique_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "input_component": {
          "name": "input_component",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "answer_data_type": {
          "name": "answer_data_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "supports_min_length": {
          "name": "supports_min_length",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "supports_max_length": {
          "name": "supports_max_length",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "supports_min_value": {
          "name": "supports_min_value",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "supports_max_value": {
          "name": "supports_max_value",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "supports_pattern": {
          "name": "supports_pattern",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "supports_options": {
          "name": "supports_options",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "supports_file_types": {
          "name": "supports_file_types",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "supports_max_file_size": {
          "name": "supports_max_file_size",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "default_min_value": {
          "name": "default_min_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "default_max_value": {
          "name": "default_max_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "icon": {
          "name": "icon",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_question_types_category": {
          "name": "idx_question_types_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "question_types_unique_name_unique": {
          "columns": [
            "unique_name"
          ],
          "nullsNotDistinct": false,
          "name": "question_types_unique_name_unique"
        }
      },
      "checkConstraints": {
        "question_types_answer_type_check": {
          "name": "question_types_answer_type_check",
          "value": "(answer_data_type)::text = ANY ((ARRAY['text'::character varying, 'integer'::character varying, 'boolean'::character varying, 'decimal'::character varying, 'json'::character varying, 'url'::character varying])::text[])"
        },
        "question_types_category_check": {
          "name": "question_types_category_check",
          "value": "(category)::text = ANY ((ARRAY['text'::character varying, 'rating'::character varying, 'choice'::character varying, 'media'::character varying, 'special'::character varying, 'input'::character varying])::text[])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.form_questions": {
      "name": "form_questions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "question_type_id": {
          "name": "question_type_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "question_key": {
          "name": "question_key",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "question_text": {
          "name": "question_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "placeholder": {
          "name": "placeholder",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "help_text": {
          "name": "help_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "is_required": {
          "name": "is_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "min_length": {
          "name": "min_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_length": {
          "name": "max_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "min_value": {
          "name": "min_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_value": {
          "name": "max_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "validation_pattern": {
          "name": "validation_pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "allowed_file_types": {
          "name": "allowed_file_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "max_file_size_kb": {
          "name": "max_file_size_kb",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scale_min_label": {
          "name": "scale_min_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scale_max_label": {
          "name": "scale_max_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "step_id": {
          "name": "step_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_form_questions_org": {
          "name": "idx_form_questions_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_questions_step_id": {
          "name": "idx_form_questions_step_id",
          "columns": [
            {
              "expression": "step_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_questions_step_id_unique": {
          "name": "idx_form_questions_step_id_unique",
          "columns": [
            {
              "expression": "step_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(step_id IS NOT NULL)",
          "with": {}
        },
        "idx_form_questions_type": {
          "name": "idx_form_questions_type",
          "columns": [
            {
              "expression": "question_type_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_form_questions_step_id": {
          "name": "fk_form_questions_step_id",
          "tableFrom": "form_questions",
          "tableTo": "form_steps",
          "schemaTo": "public",
          "columnsFrom": [
            "step_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "form_questions_org_fk": {
          "name": "form_questions_org_fk",
          "tableFrom": "form_questions",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "form_questions_type_fk": {
          "name": "form_questions_type_fk",
          "tableFrom": "form_questions",
          "tableTo": "question_types",
          "schemaTo": "public",
          "columnsFrom": [
            "question_type_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "form_questions_updated_by_fk": {
          "name": "form_questions_updated_by_fk",
          "tableFrom": "form_questions",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "form_questions_key_format": {
          "name": "form_questions_key_format",
          "value": "(question_key)::text ~ '^[a-z][a-z0-9_]*$'::text"
        },
        "form_questions_length_check": {
          "name": "form_questions_length_check",
          "value": "(min_length IS NULL) OR (max_length IS NULL) OR (min_length <= max_length)"
        },
        "form_questions_value_check": {
          "name": "form_questions_value_check",
          "value": "(min_value IS NULL) OR (max_value IS NULL) OR (min_value <= max_value)"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.question_options": {
      "name": "question_options",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "option_value": {
          "name": "option_value",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "option_label": {
          "name": "option_label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_order": {
          "name": "display_order",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_question_options_order": {
          "name": "idx_question_options_order",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int2_ops",
              "isExpression": false
            },
            {
              "expression": "display_order",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_question_options_org": {
          "name": "idx_question_options_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_question_options_question": {
          "name": "idx_question_options_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "question_options_created_by_fk": {
          "name": "question_options_created_by_fk",
          "tableFrom": "question_options",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "question_options_org_fk": {
          "name": "question_options_org_fk",
          "tableFrom": "question_options",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "question_options_question_fk": {
          "name": "question_options_question_fk",
          "tableFrom": "question_options",
          "tableTo": "form_questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "question_options_value_per_question_unique": {
          "columns": [
            "question_id",
            "option_value"
          ],
          "nullsNotDistinct": false,
          "name": "question_options_value_per_question_unique"
        },
        "question_options_order_per_question_unique": {
          "columns": [
            "question_id",
            "display_order"
          ],
          "nullsNotDistinct": false,
          "name": "question_options_order_per_question_unique"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.form_question_responses": {
      "name": "form_question_responses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "submission_id": {
          "name": "submission_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "answer_text": {
          "name": "answer_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "answer_integer": {
          "name": "answer_integer",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "answer_boolean": {
          "name": "answer_boolean",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "answer_json": {
          "name": "answer_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "answer_url": {
          "name": "answer_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "answered_at": {
          "name": "answered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_form_question_responses_org": {
          "name": "idx_form_question_responses_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_question_responses_question": {
          "name": "idx_form_question_responses_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_question_responses_rating": {
          "name": "idx_form_question_responses_rating",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "answer_integer",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(answer_integer IS NOT NULL)",
          "with": {}
        },
        "idx_form_question_responses_submission": {
          "name": "idx_form_question_responses_submission",
          "columns": [
            {
              "expression": "submission_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "form_question_responses_org_fk": {
          "name": "form_question_responses_org_fk",
          "tableFrom": "form_question_responses",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "form_question_responses_question_fk": {
          "name": "form_question_responses_question_fk",
          "tableFrom": "form_question_responses",
          "tableTo": "form_questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "form_question_responses_submission_fk": {
          "name": "form_question_responses_submission_fk",
          "tableFrom": "form_question_responses",
          "tableTo": "form_submissions",
          "schemaTo": "public",
          "columnsFrom": [
            "submission_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "form_question_responses_updated_by_fk": {
          "name": "form_question_responses_updated_by_fk",
          "tableFrom": "form_question_responses",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "form_question_responses_unique": {
          "columns": [
            "submission_id",
            "question_id"
          ],
          "nullsNotDistinct": false,
          "name": "form_question_responses_unique"
        }
      },
      "checkConstraints": {
        "form_question_responses_has_value": {
          "name": "form_question_responses_has_value",
          "value": "(answer_text IS NOT NULL) OR (answer_integer IS NOT NULL) OR (answer_boolean IS NOT NULL) OR (answer_json IS NOT NULL) OR (answer_url IS NOT NULL)"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.widgets": {
      "name": "widgets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "theme": {
          "name": "theme",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'light'"
        },
        "show_ratings": {
          "name": "show_ratings",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "show_dates": {
          "name": "show_dates",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "show_company": {
          "name": "show_company",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "show_avatar": {
          "name": "show_avatar",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "max_display": {
          "name": "max_display",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "settings": {
          "name": "settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_widgets_active": {
          "name": "idx_widgets_active",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_widgets_org": {
          "name": "idx_widgets_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "widgets_created_by_fk": {
          "name": "widgets_created_by_fk",
          "tableFrom": "widgets",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "widgets_org_fk": {
          "name": "widgets_org_fk",
          "tableFrom": "widgets",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "widgets_updated_by_fk": {
          "name": "widgets_updated_by_fk",
          "tableFrom": "widgets",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "widgets_theme_check": {
          "name": "widgets_theme_check",
          "value": "theme = ANY (ARRAY['light'::text, 'dark'::text])"
        },
        "widgets_type_check": {
          "name": "widgets_type_check",
          "value": "type = ANY (ARRAY['wall_of_love'::text, 'carousel'::text, 'single_quote'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.testimonials": {
      "name": "testimonials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "submission_id": {
          "name": "submission_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rating": {
          "name": "rating",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "customer_name": {
          "name": "customer_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_email": {
          "name": "customer_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "customer_title": {
          "name": "customer_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_company": {
          "name": "customer_company",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_avatar_url": {
          "name": "customer_avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_linkedin_url": {
          "name": "customer_linkedin_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "customer_twitter_url": {
          "name": "customer_twitter_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'form'"
        },
        "source_metadata": {
          "name": "source_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_by": {
          "name": "rejected_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_testimonials_approved": {
          "name": "idx_testimonials_approved",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(status = 'approved'::text)",
          "with": {}
        },
        "idx_testimonials_org": {
          "name": "idx_testimonials_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_testimonials_status": {
          "name": "idx_testimonials_status",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_testimonials_submission": {
          "name": "idx_testimonials_submission",
          "columns": [
            {
              "expression": "submission_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(submission_id IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "testimonials_approved_by_fk": {
          "name": "testimonials_approved_by_fk",
          "tableFrom": "testimonials",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "testimonials_org_fk": {
          "name": "testimonials_org_fk",
          "tableFrom": "testimonials",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "testimonials_rejected_by_fk": {
          "name": "testimonials_rejected_by_fk",
          "tableFrom": "testimonials",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "rejected_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "testimonials_submission_fk": {
          "name": "testimonials_submission_fk",
          "tableFrom": "testimonials",
          "tableTo": "form_submissions",
          "schemaTo": "public",
          "columnsFrom": [
            "submission_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "testimonials_updated_by_fk": {
          "name": "testimonials_updated_by_fk",
          "tableFrom": "testimonials",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "testimonials_email_format": {
          "name": "testimonials_email_format",
          "value": "customer_email ~* '^.+@.+\\..+$'::text"
        },
        "testimonials_linkedin_url_format": {
          "name": "testimonials_linkedin_url_format",
          "value": "(customer_linkedin_url IS NULL) OR (customer_linkedin_url ~* '^https?://(www\\.)?linkedin\\.com/'::text)"
        },
        "testimonials_rating_check": {
          "name": "testimonials_rating_check",
          "value": "(rating IS NULL) OR ((rating >= 1) AND (rating <= 5))"
        },
        "testimonials_source_check": {
          "name": "testimonials_source_check",
          "value": "source = ANY (ARRAY['form'::text, 'import'::text, 'manual'::text])"
        },
        "testimonials_status_check": {
          "name": "testimonials_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'approved'::text, 'rejected'::text])"
        },
        "testimonials_twitter_url_format": {
          "name": "testimonials_twitter_url_format",
          "value": "(customer_twitter_url IS NULL) OR (customer_twitter_url ~* '^https?://(www\\.)?(twitter\\.com|x\\.com)/'::text)"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.widget_testimonials": {
      "name": "widget_testimonials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "widget_id": {
          "name": "widget_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "testimonial_id": {
          "name": "testimonial_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_order": {
          "name": "display_order",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "is_featured": {
          "name": "is_featured",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "added_at": {
          "name": "added_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "added_by": {
          "name": "added_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_widget_testimonials_order": {
          "name": "idx_widget_testimonials_order",
          "columns": [
            {
              "expression": "widget_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int2_ops",
              "isExpression": false
            },
            {
              "expression": "display_order",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_widget_testimonials_org": {
          "name": "idx_widget_testimonials_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_widget_testimonials_testimonial": {
          "name": "idx_widget_testimonials_testimonial",
          "columns": [
            {
              "expression": "testimonial_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_widget_testimonials_widget": {
          "name": "idx_widget_testimonials_widget",
          "columns": [
            {
              "expression": "widget_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "widget_testimonials_added_by_fk": {
          "name": "widget_testimonials_added_by_fk",
          "tableFrom": "widget_testimonials",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "added_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "widget_testimonials_org_fk": {
          "name": "widget_testimonials_org_fk",
          "tableFrom": "widget_testimonials",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "widget_testimonials_testimonial_fk": {
          "name": "widget_testimonials_testimonial_fk",
          "tableFrom": "widget_testimonials",
          "tableTo": "testimonials",
          "schemaTo": "public",
          "columnsFrom": [
            "testimonial_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "widget_testimonials_widget_fk": {
          "name": "widget_testimonials_widget_fk",
          "tableFrom": "widget_testimonials",
          "tableTo": "widgets",
          "schemaTo": "public",
          "columnsFrom": [
            "widget_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "widget_testimonials_unique": {
          "columns": [
            "widget_id",
            "testimonial_id"
          ],
          "nullsNotDistinct": false,
          "name": "widget_testimonials_unique"
        },
        "widget_testimonials_order_unique": {
          "columns": [
            "widget_id",
            "display_order"
          ],
          "nullsNotDistinct": false,
          "name": "widget_testimonials_order_unique"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.plan_question_types": {
      "name": "plan_question_types",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "plan_id": {
          "name": "plan_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "question_type_id": {
          "name": "question_type_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_plan_question_types_plan_id": {
          "name": "idx_plan_question_types_plan_id",
          "columns": [
            {
              "expression": "plan_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_plan_question_types_question_type_id": {
          "name": "idx_plan_question_types_question_type_id",
          "columns": [
            {
              "expression": "question_type_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "plan_question_types_created_by_fk": {
          "name": "plan_question_types_created_by_fk",
          "tableFrom": "plan_question_types",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "plan_question_types_plan_fk": {
          "name": "plan_question_types_plan_fk",
          "tableFrom": "plan_question_types",
          "tableTo": "plans",
          "schemaTo": "public",
          "columnsFrom": [
            "plan_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "plan_question_types_question_type_fk": {
          "name": "plan_question_types_question_type_fk",
          "tableFrom": "plan_question_types",
          "tableTo": "question_types",
          "schemaTo": "public",
          "columnsFrom": [
            "question_type_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "plan_question_types_updated_by_fk": {
          "name": "plan_question_types_updated_by_fk",
          "tableFrom": "plan_question_types",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "plan_question_types_unique": {
          "columns": [
            "plan_id",
            "question_type_id"
          ],
          "nullsNotDistinct": false,
          "name": "plan_question_types_unique"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.contacts": {
      "name": "contacts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email_verified": {
          "name": "email_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "job_title": {
          "name": "job_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "company_name": {
          "name": "company_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "company_website": {
          "name": "company_website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "linkedin_url": {
          "name": "linkedin_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "twitter_url": {
          "name": "twitter_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'form_submission'"
        },
        "source_form_id": {
          "name": "source_form_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "submission_count": {
          "name": "submission_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_contacts_email": {
          "name": "idx_contacts_email",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_contacts_last_seen_at": {
          "name": "idx_contacts_last_seen_at",
          "columns": [
            {
              "expression": "last_seen_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_contacts_organization_id": {
          "name": "idx_contacts_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_contacts_organization_id": {
          "name": "fk_contacts_organization_id",
          "tableFrom": "contacts",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "fk_contacts_source_form_id": {
          "name": "fk_contacts_source_form_id",
          "tableFrom": "contacts",
          "tableTo": "forms",
          "schemaTo": "public",
          "columnsFrom": [
            "source_form_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "contacts_org_email_unique": {
          "columns": [
            "organization_id",
            "email"
          ],
          "nullsNotDistinct": false,
          "name": "contacts_org_email_unique"
        }
      },
      "checkConstraints": {
        "contacts_source_check": {
          "name": "contacts_source_check",
          "value": "source = ANY (ARRAY['form_submission'::text, 'import'::text, 'manual'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.form_submissions": {
      "name": "form_submissions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "form_id": {
          "name": "form_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "contact_id": {
          "name": "contact_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_form_submissions_contact_id": {
          "name": "idx_form_submissions_contact_id",
          "columns": [
            {
              "expression": "contact_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_submissions_form": {
          "name": "idx_form_submissions_form",
          "columns": [
            {
              "expression": "form_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_submissions_org": {
          "name": "idx_form_submissions_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_submissions_submitted": {
          "name": "idx_form_submissions_submitted",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "submitted_at",
              "asc": false,
              "nulls": "first",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_form_submissions_contact_id": {
          "name": "fk_form_submissions_contact_id",
          "tableFrom": "form_submissions",
          "tableTo": "contacts",
          "schemaTo": "public",
          "columnsFrom": [
            "contact_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "form_submissions_form_fk": {
          "name": "form_submissions_form_fk",
          "tableFrom": "form_submissions",
          "tableTo": "forms",
          "schemaTo": "public",
          "columnsFrom": [
            "form_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "form_submissions_org_fk": {
          "name": "form_submissions_org_fk",
          "tableFrom": "form_submissions",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "form_submissions_updated_by_fk": {
          "name": "form_submissions_updated_by_fk",
          "tableFrom": "form_submissions",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.media_entity_types": {
      "name": "media_entity_types",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target_table": {
          "name": "target_table",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target_column": {
          "name": "target_column",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'id'"
        },
        "allowed_mime_types": {
          "name": "allowed_mime_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "max_file_size_bytes": {
          "name": "max_file_size_bytes",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "media_entity_types_created_by_fkey": {
          "name": "media_entity_types_created_by_fkey",
          "tableFrom": "media_entity_types",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "media_entity_types_updated_by_fkey": {
          "name": "media_entity_types_updated_by_fkey",
          "tableFrom": "media_entity_types",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "media_entity_types_code_key": {
          "columns": [
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "media_entity_types_code_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.form_steps": {
      "name": "form_steps",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "step_order": {
          "name": "step_order",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "tips": {
          "name": "tips",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "flow_membership": {
          "name": "flow_membership",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'shared'"
        },
        "flow_id": {
          "name": "flow_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_form_steps_flow_id": {
          "name": "idx_form_steps_flow_id",
          "columns": [
            {
              "expression": "flow_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_steps_flow_order": {
          "name": "idx_form_steps_flow_order",
          "columns": [
            {
              "expression": "flow_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "step_order",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_steps_organization_id": {
          "name": "idx_form_steps_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_form_steps_created_by": {
          "name": "fk_form_steps_created_by",
          "tableFrom": "form_steps",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "fk_form_steps_flow_id": {
          "name": "fk_form_steps_flow_id",
          "tableFrom": "form_steps",
          "tableTo": "flows",
          "schemaTo": "public",
          "columnsFrom": [
            "flow_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "fk_form_steps_organization_id": {
          "name": "fk_form_steps_organization_id",
          "tableFrom": "form_steps",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "fk_form_steps_updated_by": {
          "name": "fk_form_steps_updated_by",
          "tableFrom": "form_steps",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "form_steps_flow_order_unique": {
          "columns": [
            "step_order",
            "flow_id"
          ],
          "nullsNotDistinct": false,
          "name": "form_steps_flow_order_unique"
        }
      },
      "checkConstraints": {
        "form_steps_step_type_check": {
          "name": "form_steps_step_type_check",
          "value": "step_type = ANY (ARRAY['welcome'::text, 'question'::text, 'rating'::text, 'consent'::text, 'contact_info'::text, 'reward'::text, 'thank_you'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.media": {
      "name": "media",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size_bytes": {
          "name": "file_size_bytes",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "storage_provider": {
          "name": "storage_provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'aws_s3'"
        },
        "storage_bucket": {
          "name": "storage_bucket",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "storage_path": {
          "name": "storage_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "storage_region": {
          "name": "storage_region",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processing_metadata": {
          "name": "processing_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "width": {
          "name": "width",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "height": {
          "name": "height",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "duration_seconds": {
          "name": "duration_seconds",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "thumbnail_path": {
          "name": "thumbnail_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "uploaded_by": {
          "name": "uploaded_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_media_created_at": {
          "name": "idx_media_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_media_entity": {
          "name": "idx_media_entity",
          "columns": [
            {
              "expression": "entity_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "entity_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_media_organization_id": {
          "name": "idx_media_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_media_status": {
          "name": "idx_media_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_media_storage_path": {
          "name": "idx_media_storage_path",
          "columns": [
            {
              "expression": "storage_bucket",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "storage_path",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_media_uploaded_by": {
          "name": "idx_media_uploaded_by",
          "columns": [
            {
              "expression": "uploaded_by",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(uploaded_by IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_media_entity_type": {
          "name": "fk_media_entity_type",
          "tableFrom": "media",
          "tableTo": "media_entity_types",
          "schemaTo": "public",
          "columnsFrom": [
            "entity_type"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "fk_media_organization_id": {
          "name": "fk_media_organization_id",
          "tableFrom": "media",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "fk_media_uploaded_by": {
          "name": "fk_media_uploaded_by",
          "tableFrom": "media",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "uploaded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "chk_media_duration_non_negative": {
          "name": "chk_media_duration_non_negative",
          "value": "(duration_seconds IS NULL) OR (duration_seconds >= (0)::numeric)"
        },
        "chk_media_file_size_positive": {
          "name": "chk_media_file_size_positive",
          "value": "file_size_bytes > 0"
        },
        "chk_media_height_positive": {
          "name": "chk_media_height_positive",
          "value": "(height IS NULL) OR (height > 0)"
        },
        "chk_media_status": {
          "name": "chk_media_status",
          "value": "status = ANY (ARRAY['pending'::text, 'processing'::text, 'ready'::text, 'failed'::text, 'deleted'::text])"
        },
        "chk_media_width_positive": {
          "name": "chk_media_width_positive",
          "value": "(width IS NULL) OR (width > 0)"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.form_analytics_events": {
      "name": "form_analytics_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "form_id": {
          "name": "form_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "step_index": {
          "name": "step_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "step_id": {
          "name": "step_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "event_data": {
          "name": "event_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_form_analytics_event_type": {
          "name": "idx_form_analytics_event_type",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "event_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_analytics_form": {
          "name": "idx_form_analytics_form",
          "columns": [
            {
              "expression": "form_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_analytics_org": {
          "name": "idx_form_analytics_org",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_form_analytics_session": {
          "name": "idx_form_analytics_session",
          "columns": [
            {
              "expression": "session_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "form_analytics_events_form_id_fkey": {
          "name": "form_analytics_events_form_id_fkey",
          "tableFrom": "form_analytics_events",
          "tableTo": "forms",
          "schemaTo": "public",
          "columnsFrom": [
            "form_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "form_analytics_events_organization_id_fkey": {
          "name": "form_analytics_events_organization_id_fkey",
          "tableFrom": "form_analytics_events",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "form_analytics_events_event_type_check": {
          "name": "form_analytics_events_event_type_check",
          "value": "event_type = ANY (ARRAY['form_started'::text, 'step_completed'::text, 'step_skipped'::text, 'form_submitted'::text, 'form_abandoned'::text, 'form_resumed'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.flows": {
      "name": "flows",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid_12()"
        },
        "form_id": {
          "name": "form_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "flow_type": {
          "name": "flow_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_order": {
          "name": "display_order",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "branch_question_id": {
          "name": "branch_question_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "branch_field": {
          "name": "branch_field",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "branch_operator": {
          "name": "branch_operator",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "branch_value": {
          "name": "branch_value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "idx_flows_branch_question_id": {
          "name": "idx_flows_branch_question_id",
          "columns": [
            {
              "expression": "branch_question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(branch_question_id IS NOT NULL)",
          "with": {}
        },
        "idx_flows_form_id": {
          "name": "idx_flows_form_id",
          "columns": [
            {
              "expression": "form_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_flows_form_order": {
          "name": "idx_flows_form_order",
          "columns": [
            {
              "expression": "form_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int2_ops",
              "isExpression": false
            },
            {
              "expression": "display_order",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_flows_organization_id": {
          "name": "idx_flows_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_flows_primary_per_form": {
          "name": "idx_flows_primary_per_form",
          "columns": [
            {
              "expression": "form_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(is_primary = true)",
          "with": {}
        }
      },
      "foreignKeys": {
        "fk_flows_branch_question": {
          "name": "fk_flows_branch_question",
          "tableFrom": "flows",
          "tableTo": "form_questions",
          "schemaTo": "public",
          "columnsFrom": [
            "branch_question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "fk_flows_form_id": {
          "name": "fk_flows_form_id",
          "tableFrom": "flows",
          "tableTo": "forms",
          "schemaTo": "public",
          "columnsFrom": [
            "form_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "fk_flows_organization_id": {
          "name": "fk_flows_organization_id",
          "tableFrom": "flows",
          "tableTo": "organizations",
          "schemaTo": "public",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "flows_form_name_unique": {
          "columns": [
            "form_id",
            "name"
          ],
          "nullsNotDistinct": false,
          "name": "flows_form_name_unique"
        }
      },
      "checkConstraints": {
        "chk_flows_branch_field": {
          "name": "chk_flows_branch_field",
          "value": "(branch_field IS NULL) OR (branch_field = ANY (ARRAY['answer_integer'::text, 'answer_text'::text, 'answer_boolean'::text, 'answer_json'::text]))"
        },
        "chk_flows_branch_operator": {
          "name": "chk_flows_branch_operator",
          "value": "(branch_operator IS NULL) OR (branch_operator = ANY (ARRAY['equals'::text, 'not_equals'::text, 'greater_than'::text, 'greater_than_or_equal_to'::text, 'less_than'::text, 'less_than_or_equal_to'::text, 'between'::text, 'is_one_of'::text, 'contains'::text, 'is_empty'::text]))"
        },
        "chk_flows_branch_requires_conditions": {
          "name": "chk_flows_branch_requires_conditions",
          "value": "CHECK (\nCASE\n    WHEN (flow_type = 'branch'::text) THEN ((branch_question_id IS NOT NULL) AND (branch_operator IS NOT NULL))\n    ELSE true\nEND)"
        },
        "chk_flows_condition_completeness": {
          "name": "chk_flows_condition_completeness",
          "value": "((flow_type = 'shared'::text) AND (branch_question_id IS NULL) AND (branch_field IS NULL) AND (branch_operator IS NULL) AND (branch_value IS NULL)) OR ((flow_type = 'branch'::text) AND (branch_question_id IS NOT NULL) AND (branch_field IS NOT NULL) AND (branch_operator IS NOT NULL))"
        },
        "chk_flows_primary_no_branch": {
          "name": "chk_flows_primary_no_branch",
          "value": "(NOT is_primary) OR ((branch_question_id IS NULL) AND (branch_operator IS NULL) AND (branch_value IS NULL))"
        },
        "flows_flow_type_check": {
          "name": "flows_flow_type_check",
          "value": "flow_type = ANY (ARRAY['shared'::text, 'branch'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.organization_setup_status": {
      "name": "organization_setup_status",
      "values": [
        "pending_setup",
        "completed"
      ],
      "schema": "public"
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {
      "form_questions": {
        "columns": {
          "allowed_file_types": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "media_entity_types": {
        "columns": {
          "allowed_mime_types": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "form_steps": {
        "columns": {
          "tips": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      }
    }
  }
}